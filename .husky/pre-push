#!/bin/sh
# Pre-push hook - Executa testes antes de push para garantir qualidade

echo "ğŸ§ª Executando testes antes do push..."

# Executar testes unitÃ¡rios
npm test -- --watchAll=false --passWithNoTests

if [ $? -ne 0 ]; then
  echo "âŒ Testes falharam! Push cancelado."
  echo "   Corrija os testes antes de fazer push."
  exit 1
fi

# Executar testes do client (Vitest)
npm run test:client 2>/dev/null

if [ $? -ne 0 ]; then
  echo "âŒ Testes do client falharam! Push cancelado."
  exit 1
fi

echo "âœ… Todos os testes passaram! Continuando push..."
